<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Auto-Response System Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1>üìß Email Auto-Response System</h1>
                <div class="header-actions">
                    <div class="connection-status" id="connectionStatus">
                        <span class="status-dot" id="statusDot"></span>
                        <span class="status-text" id="statusText">Connecting...</span>
                    </div>
                    <button class="btn-refresh" id="refreshBtn" title="Refresh Data">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="last-updated" id="lastUpdated">Last updated: Never</div>
        </header>

        <!-- Error Banner -->
        <div class="error-banner" id="errorBanner" style="display: none;">
            <div class="error-content">
                <span class="error-icon">‚ö†Ô∏è</span>
                <div class="error-message">
                    <strong>Connection Error</strong>
                    <p id="errorText">Unable to fetch data from the server.</p>
                </div>
                <button class="btn-retry" id="retryBtn">Retry</button>
            </div>
        </div>

        <!-- Statistics Cards -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                            <polyline points="22,6 12,13 2,6"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Total Emails</div>
                        <div class="stat-value" id="totalEmails">--</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Auto-Responded</div>
                        <div class="stat-value" id="autoResponded">--</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Avg Response Time</div>
                        <div class="stat-value" id="avgResponseTime">--</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-value" id="successRate">--</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Email Feed -->
        <section class="email-feed-section">
            <div class="section-header">
                <h2>Recent Emails</h2>
                <div class="email-count" id="emailCount">0 emails</div>
            </div>
            
            <div class="loading-spinner" id="loadingSpinner">
                <div class="spinner"></div>
                <p>Loading emails...</p>
            </div>

            <div class="email-feed" id="emailFeed">
                <!-- Email cards will be populated here -->
            </div>
        </section>
    </div>

    <!-- Email Detail Modal -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Email Details</h3>
                <button class="modal-close" id="modalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Email details will be populated here -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="modalCloseBtn">Close</button>
                <button class="btn-primary" id="sendFollowUpBtn">Send Follow-up</button>
            </div>
        </div>
    </div>

    <!-- Follow-up Email Modal -->
    <div class="modal-overlay" id="followUpModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send Follow-up Email</h3>
                <button class="modal-close" id="followUpModalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="followUpForm">
                    <div class="form-group">
                        <label for="followUpRecipient">To:</label>
                        <input type="email" id="followUpRecipient" class="form-input" readonly>
                    </div>
                    <div class="form-group">
                        <label for="followUpSubject">Subject:</label>
                        <input type="text" id="followUpSubject" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="followUpMessage">Message:</label>
                        <textarea id="followUpMessage" class="form-textarea" rows="8" required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelFollowUpBtn">Cancel</button>
                        <button type="submit" class="btn-primary" id="submitFollowUpBtn">
                            <span class="btn-text">Send Email</span>
                            <span class="btn-spinner" style="display: none;"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>